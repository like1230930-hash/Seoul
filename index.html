<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#ffffff" />
    <title>Seoul 2025 Ski Trip</title>
    
    <!-- PWA Requirements -->
    <link rel="manifest" href="manifest.json" />
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet" />
    
    <!-- React & Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ['Inter', 'Noto Sans TC', 'sans-serif'] },
            colors: {
              primary: '#1E293B',
              'bg-page': '#F2FAFC',
              'naver-green': '#03C75A',
              exit: '#F59E0B',
            },
            padding: { 'safe': 'env(safe-area-inset-bottom)' }
          },
        },
      }
    </script>
    <style>
      body { background-color: #F2FAFC; -webkit-tap-highlight-color: transparent; }
      .hide-scrollbar::-webkit-scrollbar { display: none; }
      .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      /* Line Colors */
      .bg-line-1 { background-color: #0052A4; }
      .bg-line-2 { background-color: #00A84D; }
      .bg-line-3 { background-color: #EF7C1C; }
      .bg-line-4 { background-color: #00A5DE; }
      .bg-line-5 { background-color: #996CAC; }
      .bg-line-6 { background-color: #CD7C2F; }
      .bg-line-7 { background-color: #747F00; }
      .bg-line-8 { background-color: #EA545D; }
      .bg-line-9 { background-color: #BDB092; }
      .bg-line-arex { background-color: #0090D2; }
      .bg-line-walk { background-color: #94A3B8; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- DATA & CONSTANTS ---
        const TRIP_DATA = {
            "2025-12-21": {
                title: "Day 1 / æŠµé”é¦–çˆ¾",
                subtitle: "Airport to Cheongnyangni",
                weather: { t: "4Â°C", i: "fa-cloud-moon", tip: "å¾®å†·ï¼Œå»ºè­°ç©¿è‘—é˜²é¢¨å¤–å¥—" },
                discovery: {
                    title: "æ¸…æ¶¼é‡Œçš„è€æ´¾æµªæ¼«",
                    desc: "æ¸…æ¶¼é‡Œæ˜¯é€šå¾€æ±ŸåŸé“çš„éµè·¯æ¨ç´ï¼Œé€™è£¡æœ‰å¾©å¤çš„å‚³çµ±å¸‚å ´ã€‚æ¨è–¦å»äº¬æ±å¸‚å ´å°‹å¯¶ï¼",
                    spots: [{ name: "æ¸…æ¶¼é‡Œå¥¶å¥¶å†·éºµ", desc: "è‘—åè¶…è¾£å†·éºµï¼Œåœ¨å¸‚å ´å··å¼„å…§ã€‚" }, { name: "äº¬æ±å¸‚å ´æ˜Ÿå·´å…‹1960", desc: "å»¢æ£„è€åŠ‡é™¢æ”¹å»ºçš„è¶…å¾©å¤å’–å•¡å»³ã€‚" }]
                },
                items: [
                    { type: "flight", airline: "Scoot é…·èˆª", code: "TR896", from: "TPE", fromCity: "å°åŒ—æ¡ƒåœ’", fromTime: "18:15", to: "ICN", toCity: "é¦–çˆ¾ä»å·", toTime: "21:45", bag: "35kg", title: "Flight TR896" },
                    { type: "transport", time: "22:40", title: "æ©Ÿå ´å‰å¾€æ¸…æ¶¼é‡Œ", sub: "AREX + åœ°éµ1è™Ÿç·š", tags: ["æœ€å¿«è·¯ç·š"], desc: "å…¥å¢ƒå¾Œè·Ÿéš¨é»ƒè‰²æ–‡å­—ã€ŒAirport Railroadã€æŒ‡æ¨™ç§»å‹•ã€‚", tips: "AREXç›´é”è»Šæœ«ç­ç´„ 22:48ï¼Œè«‹å‹™å¿…æŠŠæ¡æ™‚é–“ã€‚" },
                    { type: "transit", title: "Transfer", from: "ä»å·æ©Ÿå ´ T1", to: "æ¸…æ¶¼é‡Œç«™", steps: [{ color: "bg-line-arex", name: "AREX", desc: "å¾€é¦–çˆ¾ç«™ (ç›´é”)", time: "43åˆ†" }, { color: "bg-line-1", name: "1è™Ÿç·š", desc: "é¦–çˆ¾ç«™ âœ æ¸…æ¶¼é‡Œ", time: "18åˆ†" }] },
                    { type: "hotel", time: "00:10", title: "å…¥ä½ Check-in", sub: "Hotel The Designers", address: "226 Wangsan-ro, Dongdaemun-gu, Seoul", exit: "4è™Ÿå‡ºå£", desc: "æ­¥è¡Œç´„ 2 åˆ†é˜å³é”ã€‚", tips: "æ¨“ä¸‹æœ‰ä¾¿åˆ©å•†åº—ï¼Œå»ºè­°å…ˆè²·å¥½éš”å¤©æ—©é¤ã€‚" },
                    { type: "snack", title: "æ·±å¤œè£œçµ¦ & å®µå¤œ", items: [ { name: "GS25 ä¾¿åˆ©å•†åº—", desc: "é£¯åº—æ¨“ä¸‹å³æœ‰ã€‚" }, { name: "å—åŸç‚¸é›", desc: "æ¸…æ¶¼é‡Œç‚¸é›èƒ¡åŒååº—ï¼Œç‡Ÿæ¥­è‡³æ·±å¤œã€‚" } ] }
                ]
            },
            "2025-12-22": {
                title: "Day 2 / å‰å¾€é›ªå ´",
                subtitle: "High 1 Resort",
                weather: { t: "-5Â°C", i: "fa-snowflake", tip: "æ¥µå†·ï¼Œè«‹ç©¿ç™¼ç†±è¡£+é›ªè¡£" },
                items: [
                    { type: "transport", time: "07:00", title: "é›†åˆ", sub: "æ¸…æ¶¼é‡Œç«™ Olive Young å‰", tags: ["æ—©èµ·æ³¨æ„"], tips: "7:25 ç«è»Šæº–æ™‚ç™¼è»Šï¼Œé€¾æ™‚ä¸å€™ã€‚" },
                    { type: "activity", time: "12:50", title: "æ»‘é›ªèª²ç¨‹é–‹å§‹", sub: "Day 1 èª²ç¨‹", desc: "æ•™ç·´æ•™å­¸ï¼šåŸºç¤ç…è»Šèˆ‡å®‰å…¨è·Œå€’ã€‚", tags: ["æ•™å­¸ 3hr"] },
                    { type: "hotel", time: "16:30", title: "å…¥ä½ Ski House", sub: "High 1 Resort", desc: "è¾¦ç†å…¥ä½æ‰‹çºŒã€‚" },
                    { type: "snack", title: "æ·±å¤œè£œçµ¦ & å®µå¤œ", items: [ { name: "Condo ä¾¿åˆ©å•†åº—", desc: "è²·æ³¡éºµã€å•¤é…’ã€‚" }, { name: "å¤–é€ç‚¸é›", desc: "æ¨è–¦ Pelicana æˆ– Mexicanaã€‚" } ] }
                ]
            },
            "2025-12-23": {
                title: "Day 3 / å…¨æ—¥æ»‘é›ª",
                subtitle: "Ski & Relax",
                weather: { t: "-8Â°C", i: "fa-snowflake", tip: "å±±é ‚é¢¨å¤§ï¼Œå‹™å¿…æˆ´è­·ç›®é¡" },
                items: [
                    { type: "activity", time: "09:00", title: "æ»‘é›ªèª²ç¨‹ Day 2", tags:["æ•™å­¸ 3hr"] },
                    { type: "activity", time: "13:30", title: "Top of the Top", sub: "å±±é ‚æ—‹è½‰å’–å•¡å»³", desc: "1340m å±±é ‚æ™¯è§€ã€‚", tags:["å¿…å»"] },
                    { type: "snack", title: "æ·±å¤œè£œçµ¦ & å®µå¤œ", items: [ { name: "å¤æ±—å¸‚å ´æ¹¯é£¯", desc: "åœ¨åœ°æº«æš–é¦–é¸ã€‚" } ] }
                ]
            },
            "2025-12-24": {
                title: "Day 4 / è¿”å›é¦–çˆ¾",
                subtitle: "Christmas Eve",
                weather: { t: "-2Â°C", i: "fa-tree", tip: "å¹³å®‰å¤œäººå¤šï¼Œæ³¨æ„ä¿æš–" },
                items: [
                    { type: "transport", time: "16:20", title: "å·´å£«å›é¦–çˆ¾", tags:["å›ç¨‹"] },
                    { type: "food", time: "20:15", title: "æ™šé¤ï¼šè»å­å¤§éŸ“çƒ¤è…¸", sub: "æ˜æ´åº—", desc: "è¯èåŒæ¬¾ï¼å¿…é»ã€å¤§éŸ“ç¶œåˆçƒ¤è…¸ã€ã€‚", tags: ["å¹³å®‰å¤œå¤§é¤"], naverLink: "https://map.naver.com/v5/search/êµ°ìëŒ€í•œê³±ì°½%20ëª…ë™ì " },
                    { type: "hotel", time: "23:45", title: "å…¥ä½ Airbnb", sub: "ä¸Šæ°´ç«™ Sangsu", exit: "3è™Ÿå‡ºå£" }
                ]
            },
            "2025-12-25": { 
                title: "Day 5 / è–èª•å¿«æ¨‚", 
                subtitle: "Seongsu & Majang", 
                weather: { t: "0Â°C", i: "fa-gift", tip: "è–èª•ç¯€è–æ°´æ´äººæ½®çœ¾å¤š" },
                items: [
                    { type: "transit", title: "Transit", from: "ä¸Šæ°´ç«™", to: "è–æ°´ç«™", steps: [{ color: "bg-line-6", name: "6è™Ÿç·š", desc: "ä¸Šæ°´ âœ åˆäº•" }, { color: "bg-line-2", name: "2è™Ÿç·š", desc: "åˆäº• âœ è–æ°´ç«™" }] },
                    { type: "food", time: "12:30", title: "åˆé¤ï¼šå—ç´…æœ¬å®¶ä¸€éš»é›", sub: "è–æ°´åº—", exit: "è–æ°´ç«™ 4è™Ÿå‡ºå£", desc: "åœ¨åœ°äººå¼·çƒˆæ¨è–¦ï¼æ¹¯é ­æ¸…ç”œï¼Œé›è‚‰è»Ÿå«©ã€‚è¨˜å¾—åŠ é»ã€åˆ€åˆ‡éºµã€ã€‚", tags: ["æš–èƒƒé¦–é¸", "è–æ°´å¿…åƒ"], naverLink: "https://map.naver.com/v5/search/ë‚¨ë‹¤ë¥¸ë³¸ê°€ë‹­í•œë§ˆë¦¬%20ì„±ìˆ˜ì " },
                    { type: "list", time: "14:30", title: "è–æ°´æ´æ½®ç‰Œå·¡ç¦®", sub: "æ¼”æ­¦å ´è¡—", list: ["<b>Matin Kim</b> / <b>Musinsa Store</b>", "<b>Tamburins</b> / <b>Dior è–æ°´</b>", "<b>Point of View</b> / <b>Rockfish</b>"], tags:["æ½®ç‰Œ", "å¿…é€›"] },
                    { type: "transit", title: "Transit", from: "è–æ°´ç«™", to: "é¦¬å ´ç«™", steps: [{ color: "bg-line-2", name: "2è™Ÿç·š", desc: "è–æ°´ âœ å¾€åé‡Œ" }, { color: "bg-line-5", name: "5è™Ÿç·š", desc: "å¾€åé‡Œ âœ é¦¬å ´ç«™" }] },
                    { type: "food", time: "19:00", title: "æ™šé¤ï¼šé¦¬å ´æ´éŸ“ç‰›æ‘", sub: "é¦¬å ´ç«™ 2è™Ÿå‡ºå£", desc: "CPå€¼æœ€é«˜çš„ç¾é¸ç¾çƒ¤éŸ“ç‰›é«”é©—ã€‚", tags: ["éŸ“ç‰›", "è–èª•å¤§é¤"], naverLink: "https://map.naver.com/v5/search/ë§ˆì¥ì¶•ì‚°ë¬¼ì‹œì¥" },
                    { type: "activity", time: "21:00", title: "æ±å¤§é–€å¤œé€›", desc: "NyuNyu é£¾å“æ‰¹ç™¼ã€DDP å¤œæ™¯ã€‚", tags:["å¤œè²“è¡Œç¨‹"] },
                    { type: "snack", title: "è–èª•å®µå¤œ (å¤–é€æ¨è–¦)", items: [ { name: "Puradak (í‘¸æ‹‰ë‹­ç‚¸é›)", desc: "æ¨è–¦ã€é’é™½ç¾ä¹ƒæ»‹ç‚¸é›ã€ï¼ŒåŒ…è£éå¸¸ç²¾ç¾ã€‚" } ] }
                ] 
            },
            "2025-12-26": { 
                title: "Day 6 / æ‡·èˆŠé¦–çˆ¾", 
                subtitle: "Bukchon & Ikseon", 
                weather: { t: "2Â°C", i: "fa-camera", tip: "é©åˆæ•£æ­¥æ‹ç…§" }, 
                items: [
                    { type: "food", time: "13:30", title: "åˆé¤ï¼šåœŸä¿—æ‘è”˜é›æ¹¯", desc: "é¦–çˆ¾æœ€ç¶“å…¸çš„è”˜é›æ¹¯ã€‚", tags: ["å¿…åƒ"], naverLink: "https://map.naver.com/v5/search/í† ì†ì´Œì‚¼ê³„íƒ•" },
                    { type: "list", time: "17:30", title: "ç›Šå–„æ´è¿·å®®", list: ["<b>æ¸…æ°´å ‚</b> (ç‡ˆç± å’–å•¡)", "<b>å°å¤é¹½ç”°</b>"], tags: ["å¾©å¤"] },
                    { type: "snack", title: "æœ€å¾Œä¸€æ™šå®µå¤œ", items: [ { name: "60-gye Chicken (60ê³„ì¹˜í‚¨)", desc: "æ¨™æ¦œæ¯æ—¥æ›æ²¹ï¼Œç‚¸é›æ¥µåº¦é…¥è„†ã€‚" } ] }
                ] 
            },
            "2025-12-27": {
                title: "Day 7 / æ»¿è¼‰è€Œæ­¸", 
                subtitle: "Bye Seoul", 
                weather: { t: "3Â°C", i: "fa-plane" },
                items: [
                    { type: "shopping", time: "16:00", title: "æ¨‚å¤©è¶…å¸‚", sub: "é¦–çˆ¾ç«™åº—", desc: "æœ€å¾Œæ¡è²·ä¼´æ‰‹ç¦®ã€‚", tags: ["å¿…è²·"] },
                    { type: "flight", airline: "Scoot é…·èˆª", code: "TR897", from: "ICN", fromTime: "23:00", to: "TPE", toTime: "00:45", bag: "50kg", title: "Flight TR897" }
                ]
            }
        };

        const PHRASES = [
            { k: "ì•ˆë…•í•˜ì„¸ìš”", p: "An-nyeong-ha-se-yo", m: "ä½ å¥½" },
            { k: "ê°ì‚¬í•©ë‹ˆë‹¤", p: "Gam-sa-ham-ni-da", m: "è¬è¬" },
            { k: "ì–¼ë§ˆì˜ˆìš”?", p: "Eol-ma-ye-yo?", m: "å¤šå°‘éŒ¢?" },
            { k: "í™”ì¥ì‹¤ ì–´ë””ì˜ˆìš”?", p: "Hwa-jang-sil eo-di-ye-yo?", m: "å»æ‰€åœ¨å“ª?" },
            { k: "ì´ê±° ì£¼ì„¸ìš”", p: "I-geo ju-se-yo", m: "è«‹çµ¦æˆ‘é€™å€‹" },
            { k: "ë§›ìˆì–´ìš”", p: "Ma-si-sseo-yo", m: "å¥½åƒ" }
        ];

        // --- SUB-COMPONENTS ---

        const NaverButton = ({ url, query, address }) => {
            const finalUrl = url || (query || address ? `https://map.naver.com/v5/search/${encodeURIComponent(query || address || '')}` : null);
            if (!finalUrl) return null;
            return (
                <a href={finalUrl} target="_blank" rel="noreferrer" className="flex items-center justify-center bg-[#03C75A] text-white font-bold rounded-xl p-3 mt-4 text-sm w-full active:opacity-90">
                    <span className="font-black text-lg mr-2 font-serif">N</span> é–‹å•Ÿ Naver Map
                </a>
            );
        };

        const TagPill = ({ text }) => {
            const isAlert = text.includes("å¿…") || text.includes("æ³¨") || text.includes("é‡‘");
            return <span className={`inline-flex items-center px-2 py-0.5 rounded-lg text-[10px] font-bold mr-1 mb-1 border ${isAlert ? 'bg-orange-50 text-orange-600 border-orange-100' : 'bg-slate-100 text-slate-500 border-slate-200'}`}>{text}</span>;
        };

        const BoardingPass = ({ item }) => (
            <div className="bg-white rounded-[24px] shadow-sm mb-6 border border-slate-200 overflow-hidden">
                <div className="px-6 py-3 bg-slate-50 border-b border-slate-100 flex justify-between items-center">
                    <span className="text-[10px] font-bold tracking-widest opacity-50">BOARDING PASS</span>
                    <span className="font-bold text-xs">{item.airline}</span>
                </div>
                <div className="p-6">
                    <div className="flex justify-between items-center mb-4">
                        <div className="text-3xl font-black">{item.from}</div>
                        <div className="flex-1 flex flex-col items-center px-4"><i className="fas fa-plane text-slate-300 text-xs transform rotate-90 mb-1"></i><div className="w-full h-px bg-slate-200"></div></div>
                        <div className="text-3xl font-black text-blue-600">{item.to}</div>
                    </div>
                    <div className="flex justify-between text-xs font-mono text-slate-500">
                        <div>DEP: {item.fromTime}</div>
                        <div>{item.code}</div>
                        <div>ARR: {item.toTime}</div>
                    </div>
                </div>
            </div>
        );

        const TransitCard = ({ item }) => (
            <div className="bg-white border border-slate-200 rounded-[16px] p-5 mb-4">
                <div className="flex justify-between items-center mb-4 text-xs font-bold text-slate-400">
                    <div><i className="fas fa-route mr-1"></i> äº¤é€šè½‰ä¹˜</div>
                    <div>{item.from} âœ {item.to}</div>
                </div>
                {item.steps?.map((step, idx) => (
                    <div key={idx} className="flex gap-4 relative pb-4 last:pb-0">
                        {idx !== item.steps.length - 1 && <div className="absolute left-2.5 top-5 bottom-0 w-0.5 bg-slate-100"></div>}
                        <div className={`w-5 h-5 rounded-full z-10 border-4 border-white shadow-sm ${step.color || 'bg-slate-400'}`}></div>
                        <div className="flex-1 -mt-1">
                            <div className="flex items-center gap-2"><span className={`text-[10px] font-black text-white px-1.5 rounded ${step.color}`}>{step.name}</span><span className="text-sm font-bold">{step.desc}</span></div>
                            {step.time && <div className="text-[10px] text-slate-400 mt-1"><i className="fas fa-clock mr-1"></i>{step.time}</div>}
                        </div>
                    </div>
                ))}
            </div>
        );

        const SnackCard = ({ item }) => (
            <div className="bg-slate-800 text-slate-200 rounded-[20px] p-5 mb-5 shadow-lg">
                <div className="text-[10px] font-bold text-indigo-300 uppercase tracking-widest mb-4 flex items-center"><i className="fas fa-moon mr-2"></i> {item.title}</div>
                <div className="space-y-4">
                    {item.items?.map((s, idx) => (
                        <div key={idx} className="flex items-start border-b border-white/5 pb-3 last:border-0 last:pb-0">
                            <i className="fas fa-utensils text-yellow-500 mt-1 mr-3 text-xs"></i>
                            <div><div className="font-bold text-white text-sm">{s.name}</div><div className="text-xs text-slate-400">{s.desc}</div></div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const ListCard = ({ item }) => (
            <div className="bg-white rounded-[20px] p-6 mb-4 border border-slate-100 shadow-sm">
                <div className="text-xs font-mono font-bold text-slate-400 mb-1">{item.time} {item.sub}</div>
                <h3 className="text-lg font-bold mb-3">{item.title}</h3>
                <ul className="space-y-2 mb-4">
                    {item.list?.map((li, idx) => (
                        <li key={idx} className="flex items-start text-sm text-slate-600 pl-4 relative"><span className="absolute left-0 top-2 w-1 h-1 bg-slate-300 rounded-full"></span><span dangerouslySetInnerHTML={{__html: li}}></span></li>
                    ))}
                </ul>
                <div className="flex flex-wrap">{item.tags?.map((tag, idx) => <TagPill key={idx} text={tag} />)}</div>
            </div>
        );

        const StandardCard = ({ item }) => {
            const icons = { transport: "fa-train", hotel: "fa-bed", food: "fa-utensils", activity: "fa-person-skiing", shopping: "fa-bag-shopping" };
            return (
                <div className="bg-white rounded-[20px] p-6 mb-4 border border-slate-100 shadow-sm">
                    <div className="flex gap-4 mb-4">
                        <div className="w-12 h-12 rounded-2xl bg-slate-50 flex items-center justify-center text-blue-500"><i className={`fas ${icons[item.type] || 'fa-circle'}`}></i></div>
                        <div className="flex-1">
                            <div className="text-xs font-mono text-slate-400 font-bold">{item.time}</div>
                            <h3 className="text-lg font-bold">{item.title}</h3>
                            <div className="text-xs text-slate-500">{item.sub}</div>
                        </div>
                    </div>
                    {item.desc && <p className="text-sm text-slate-600 mb-3" dangerouslySetInnerHTML={{__html: item.desc}}></p>}
                    <div className="flex flex-wrap">{item.tags?.map((tag, idx) => <TagPill key={idx} text={tag} />)}</div>
                    <NaverButton url={item.naverLink} query={item.mapQuery} address={item.address} />
                </div>
            );
        };

        // --- VIEW COMPONENTS ---

        const ItineraryView = ({ activeDate }) => {
            const data = TRIP_DATA[activeDate];
            return (
                <div className="pb-8 animate-[fadeIn_0.3s_ease-out]">
                    {data.discovery && (
                        <div className="bg-slate-700 text-white rounded-[24px] p-6 mb-6 shadow-xl overflow-hidden relative">
                            <div className="relative z-10">
                                <div className="text-[10px] font-bold text-blue-300 uppercase tracking-widest mb-2"><i className="fas fa-compass mr-1"></i> DISCOVERY</div>
                                <h3 className="text-xl font-black mb-2">{data.discovery.title}</h3>
                                <p className="text-xs text-slate-300 mb-4">{data.discovery.desc}</p>
                                {data.discovery.spots.map((s, i) => (
                                    <div key={i} className="bg-white/10 p-3 rounded-xl mb-2 last:mb-0"><div className="font-bold text-sm">{s.name}</div><div className="text-[10px] text-slate-400">{s.desc}</div></div>
                                ))}
                            </div>
                        </div>
                    )}
                    {data.items.map((item, idx) => {
                        if (item.type === 'flight') return <BoardingPass key={idx} item={item} />;
                        if (item.type === 'transit') return <TransitCard key={idx} item={item} />;
                        if (item.type === 'snack') return <SnackCard key={idx} item={item} />;
                        if (item.type === 'list') return <ListCard key={idx} item={item} />;
                        return <StandardCard key={idx} item={item} />;
                    })}
                </div>
            );
        };

        const AccountingView = () => {
            const [expenses, setExpenses] = useState([]);
            const [name, setName] = useState('');
            const [amount, setAmount] = useState('');
            const [curr, setCurr] = useState('KRW');

            useEffect(() => {
                const saved = localStorage.getItem('ski_exp_v2');
                if (saved) setExpenses(JSON.parse(saved));
            }, []);

            const add = (who) => {
                if (!name || !amount) return;
                const updated = [...expenses, { id: Date.now(), i: name, a: parseInt(amount), w: who, c: curr }];
                setExpenses(updated);
                localStorage.setItem('ski_exp_v2', JSON.stringify(updated));
                setName(''); setAmount('');
            };

            const total = expenses.reduce((acc, e) => acc + e.a, 0);
            const paidMe = expenses.filter(e => e.w === 'me').reduce((acc, e) => acc + e.a, 0);
            const paidCup = expenses.filter(e => e.w === 'cup').reduce((acc, e) => acc + e.a, 0);
            const diff = paidMe - (total / 2);

            return (
                <div className="pb-10 animate-[fadeIn_0.3s_ease-out]">
                    <h2 className="text-2xl font-black mb-6 px-2">æ”¯å‡ºè¨˜å¸³</h2>
                    <div className="bg-slate-800 text-white p-6 rounded-[24px] mb-6 shadow-lg">
                        <div className="text-[10px] text-slate-400 uppercase font-bold mb-1">TOTAL EXPENSE</div>
                        <div className="text-3xl font-black mb-6">â‚©{total.toLocaleString()}</div>
                        <div className={`text-center py-2 rounded-lg text-sm font-bold ${diff > 0 ? 'bg-green-500/20 text-green-400' : 'bg-blue-500/20 text-blue-400'}`}>
                            {diff > 0 ? `å°æ–¹ éœ€çµ¦ä½  â‚©${Math.abs(diff).toLocaleString()}` : `ä½  éœ€çµ¦å°æ–¹ â‚©${Math.abs(diff).toLocaleString()}`}
                        </div>
                    </div>
                    <div className="bg-white p-5 rounded-[24px] border border-slate-200 mb-6">
                        <input value={name} onChange={e => setName(e.target.value)} placeholder="é …ç›®" className="w-full p-3 rounded-xl bg-slate-50 mb-3 text-sm font-bold outline-none" />
                        <div className="flex gap-2 mb-4">
                            <select value={curr} onChange={e => setCurr(e.target.value)} className="p-3 rounded-xl bg-slate-50 text-sm font-bold"><option value="KRW">â‚©</option><option value="TWD">NT$</option></select>
                            <input type="number" value={amount} onChange={e => setAmount(e.target.value)} placeholder="é‡‘é¡" className="flex-1 p-3 rounded-xl bg-slate-50 text-sm font-bold outline-none" />
                        </div>
                        <div className="flex gap-2">
                            <button onClick={() => add('me')} className="flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold text-sm">æˆ‘å…ˆä»˜</button>
                            <button onClick={() => add('cup')} className="flex-1 py-3 bg-emerald-600 text-white rounded-xl font-bold text-sm">å°æ–¹ä»˜</button>
                        </div>
                    </div>
                </div>
            );
        };

        const TranslationView = () => (
            <div className="pb-10 grid grid-cols-2 gap-3 animate-[fadeIn_0.3s_ease-out]">
                <h2 className="text-2xl font-black mb-4 col-span-2 px-2">ç¿»è­¯å­—å¡</h2>
                {PHRASES.map((p, i) => (
                    <button key={i} onClick={() => { if('speechSynthesis' in window) { const u = new SpeechSynthesisUtterance(p.k); u.lang='ko-KR'; window.speechSynthesis.speak(u); }}} className="bg-white p-5 rounded-[24px] border border-slate-200 text-center active:scale-95 transition-transform h-32 flex flex-col justify-center items-center">
                        <div className="text-lg font-bold mb-1">{p.k}</div>
                        <div className="text-[10px] text-red-500 font-bold uppercase mb-2">{p.p}</div>
                        <div className="text-xs text-slate-500">{p.m}</div>
                    </button>
                ))}
            </div>
        );

        const ToolsView = () => {
            const [rate, setRate] = useState(43);
            const [krw, setKrw] = useState('');
            return (
                <div className="pb-10 space-y-6 animate-[fadeIn_0.3s_ease-out]">
                    <h2 className="text-2xl font-black mb-2 px-2">æ—…è¡Œå·¥å…·</h2>
                    <div className="bg-slate-900 text-white p-6 rounded-[24px] shadow-lg">
                        <div className="flex justify-between items-center mb-4"><div className="text-xs font-bold opacity-50">EXCHANGE RATE</div><div className="text-xs font-bold">1 TWD = {rate} KRW</div></div>
                        <div className="flex items-center gap-4">
                            <input type="number" value={krw} onChange={e => setKrw(e.target.value)} placeholder="â‚© KRW" className="w-1/2 bg-slate-800 p-3 rounded-xl text-lg font-bold outline-none" />
                            <i className="fas fa-arrow-right text-slate-600"></i>
                            <div className="w-1/2 text-2xl font-black text-emerald-400">NT$ {krw ? Math.round(parseInt(krw)/rate).toLocaleString() : 0}</div>
                        </div>
                    </div>
                    <div className="grid grid-cols-2 gap-3">
                        <a href="tel:1330" className="bg-white p-4 rounded-2xl border border-slate-200 text-center"><div className="text-xl mb-1">ğŸ“</div><div className="text-xs font-bold">è§€å…‰ç¿»è­¯ 1330</div></a>
                        <a href="tel:112" className="bg-white p-4 rounded-2xl border border-slate-200 text-center"><div className="text-xl mb-1">ğŸš“</div><div className="text-xs font-bold">è­¦å¯Ÿ 112</div></a>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---

        const App = () => {
            const [tab, setTab] = useState('itinerary');
            const [date, setDate] = useState(Object.keys(TRIP_DATA)[0]);

            useEffect(() => { window.scrollTo(0,0); }, [tab, date]);

            return (
                <div className="min-h-screen pb-24">
                    {tab === 'itinerary' && (
                        <div className="sticky top-0 z-40 bg-[#F2FAFC]/95 backdrop-blur-md border-b border-slate-200 px-6 pt-12 pb-4">
                            <div className="flex justify-between items-end mb-6">
                                <div><div className="text-[10px] font-black text-blue-600 tracking-tighter uppercase mb-1">Seoul Ski 2025</div><h1 className="text-3xl font-black">{TRIP_DATA[date].title.split(' / ')[1]}</h1></div>
                                <div className="text-right"><i className={`fas ${TRIP_DATA[date].weather.i} text-xl mb-1`}></i><div className="text-xs font-bold text-slate-500">{TRIP_DATA[date].weather.t}</div></div>
                            </div>
                            <div className="flex gap-3 overflow-x-auto hide-scrollbar snap-x">
                                {Object.keys(TRIP_DATA).map(d => (
                                    <button key={d} onClick={() => setDate(d)} className={`flex-shrink-0 w-16 h-16 rounded-2xl snap-start flex flex-col items-center justify-center border transition-all ${d === date ? 'bg-slate-800 text-white border-transparent shadow-lg scale-105' : 'bg-white text-slate-400 border-slate-100'}`}>
                                        <span className="text-[8px] font-bold mb-1">{new Date(d).toLocaleDateString('en-US', {weekday:'short'})}</span>
                                        <span className="text-xl font-black font-mono leading-none">{new Date(d).getDate()}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    <main className={`px-4 ${tab === 'itinerary' ? 'pt-6' : 'pt-12'}`}>
                        {tab === 'itinerary' && <ItineraryView activeDate={date} />}
                        {tab === 'accounting' && <AccountingView />}
                        {tab === 'translate' && <TranslationView />}
                        {tab === 'tools' && <ToolsView />}
                    </main>

                    <nav className="fixed bottom-0 left-0 w-full bg-white/90 backdrop-blur-md border-t border-slate-200 h-16 flex justify-around items-center px-2 pb-safe z-50">
                        {[
                            { id: 'itinerary', icon: 'fa-map', label: 'è¡Œç¨‹' },
                            { id: 'accounting', icon: 'fa-wallet', label: 'è¨˜å¸³' },
                            { id: 'translate', icon: 'fa-language', label: 'ç¿»è­¯' },
                            { id: 'tools', icon: 'fa-suitcase', label: 'å·¥å…·' }
                        ].map(t => (
                            <button key={t.id} onClick={() => setTab(t.id)} className={`flex flex-col items-center gap-1 w-full transition-all ${tab === t.id ? 'text-blue-600 scale-110' : 'text-slate-400'}`}>
                                <i className={`fas ${t.icon} text-lg`}></i><span className="text-[10px] font-black">{t.label}</span>
                            </button>
                        ))}
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
